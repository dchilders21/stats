{% extends "layout.html" %}
{% block content %}
    <!-- Page-Title -->
    <div class="row">
        <div class="col-sm-12">
            <div class="page-title-box">
                <ol class="breadcrumb pull-right">
                    <li><a href="#">{{team_name}}</a></li>
                    <li class="active">Dashboard</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-6">
            <div class="portlet"><!-- /primary heading -->
                <div class="portlet-heading">
                    <h3 class="portlet-title text-dark">
                        Donut Pie
                    </h3>
                    <div class="portlet-widgets">
                        <a href="javascript:;" data-toggle="reload"><i class="ion-refresh"></i></a>
                        <span class="divider"></span>
                        <a data-toggle="collapse" data-parent="#accordion1" href="#portlet3"><i class="ion-minus-round"></i></a>
                        <span class="divider"></span>
                        <a href="#" data-toggle="remove"><i class="ion-close-round"></i></a>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div id="portlet3" class="panel-collapse collapse in">
                    <div class="portlet-body">
                        <div id="donut-chart">
                            <div id="donut-chart-container" class="flot-chart" style="height: 320px;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="card-box table-responsive">
                <h4 class="text-dark  header-title m-t-0">Upcoming Match</h4>
                <div class="table-responsive">
                    <table class="table" class="table table-striped table-bordered">
                        <thead>
                        <tr>
                            <th>Teams</th>
                            <th>Goals For</th>
                            <th>Goals Allowed</th>
                            <th>Attacks</th>
                            <th>Dangerous Attacks</th>
                            <th>Goal Attempts</th>
                            <th>Ball Safe</th>
                            <th>Possession</th>
                            <th>Predicted Points</th>
                            <th>Predicted Goals</th>
                        </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{ home_features.name }} <small class="text-white">({{ home_record.win }} - {{ home_record.loss }} - {{ home_record.draw }})</small></td>
                                <td>{{ home_features.goals_for }}</td>
                                <td>{{ home_features.goals_allowed }}</td>
                                <td>{{ home_features.attacks }}</td>
                                <td>{{ home_features.dangerous_attacks }}</td>
                                <td>{{ home_features.goal_attempts }}</td>
                                <td>{{ home_features.ball_safe }}</td>
                                <td>{{ home_features.possession }}</td>
                                <td>{{ home_predicted_points }}</td>
                                <td>{{ home_predicted_goals }}</td>
                            </tr>
                            <tr>
                                <td>{{ away_features.name }} <small class="text-white">({{ away_record.win }} - {{ away_record.loss }} - {{ away_record.draw }})</small></td>
                                <td>{{ away_features.goals_for }}</td>
                                <td>{{ away_features.goals_allowed }}</td>
                                <td>{{ away_features.attacks }}</td>
                                <td>{{ away_features.dangerous_attacks }}</td>
                                <td>{{ away_features.goal_attempts }}</td>
                                <td>{{ away_features.ball_safe }}</td>
                                <td>{{ away_features.possession }}</td>
                                <td>{{ away_predicted_points }}</td>
                                <td>{{ away_predicted_goals }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <br />
                <br />

                <h4 class="text-dark  header-title m-t-0">Season Stats</h4>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                        <tr>
                            <th>Goals For</th>
                            <th>Goals Allowed</th>
                            <th>Attacks</th>
                            <th>Dangerous Attacks</th>
                            <th>Yellow Cards</th>
                            <th>Corner Kicks</th>
                            <th>Possession</th>
                            <th>Shots on Target</th>
                            <th>Shots Total</th>
                            <th>Ball Safe</th>
                            <th>Goal Attempts</th>
                            <th>Goal Attempts Allowed</th>
                            <th>Saves</th>
                            <th>Goal Kicks</th>
                            <th>First Half Goals</th>
                            <th>Second Half Goals</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>{{ season_stats.goals_for }}</td>
                            <td>{{ season_stats.goals_allowed }}</td>
                            <td>{{ season_stats.attacks }}</td>
                            <td>{{ season_stats.dangerous_attacks }}</td>
                            <td>{{ season_stats.yellow_cards }}</td>
                            <td>{{ season_stats.corner_kicks }}</td>
                            <td>{{ season_stats.possession }}</td>
                            <td>{{ season_stats.shots_on_target }}</td>
                            <td>{{ season_stats.shots_total }}</td>
                            <td>{{ season_stats.ball_safe }}</td>
                            <td>{{ season_stats.goal_attempts }}</td>
                            <td>{{ season_stats.goal_attempts_allowed }}</td>
                            <td>{{ season_stats.saves }}</td>
                            <td>{{ season_stats.goal_kicks }}</td>
                            <td>{{ season_stats.first_half_goals }}</td>
                            <td>{{ season_stats.sec_half_goals }}</td>

                        </tr>
                        </tbody>
                    </table>
                </div>

                <br />
                <br />

                <h4 class="text-dark header-title m-t-0">Previous Matches</h4>
                <div class="table-responsive">
                    <table id="datatable" class="table table-striped table-bordered">
                        <thead>
                        <tr>
                            <th>Scheduled</th>
                            <th>Home Team</th>
                            <th>Home Score</th>
                            <th>Home First Half Score</th>
                            <th>Home Second Half Score</th>
                            <th>Away Team</th>
                            <th>Away Score</th>
                            <th>Away First Half Score</th>
                            <th>Away Second Half Score</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for match in previous_matches %}
                            <tr>
                                <td>{{ match.scheduled }}</td>
                                <td><a href="{{ url_for('team', team_id=match.home_id) }}">{{ match.home_team }}</a></td>
                                <td>{{ match.home_score }}</td>
                                <td>{{ match.home_first_half_score }}</td>
                                <td>{{ match.home_second_half_score }}</td>
                                <td><a href="{{ url_for('team', team_id=match.away_id) }}">{{ match.away_team }}</a></td>
                                <td>{{ match.away_score }}</td>
                                <td>{{ match.away_first_half_score }}</td>
                                <td>{{ match.away_second_half_score }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- end col -8 -->

    </div>
    <!-- end row -->
{% endblock %}

{% block scripts %}
    <!-- Datatable JS -->
    <script src="{{ url_for('static', filename='plugins/datatables/jquery.dataTables.min.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/datatables/dataTables.bootstrap.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/datatables/dataTables.buttons.min.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/datatables/buttons.bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/datatables/jszip.min.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/datatables/pdfmake.min.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/datatables/vfs_fonts.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/datatables/buttons.html5.min.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/datatables/buttons.print.min.js') }}"></script>

    <script src="{{ url_for('static', filename='plugins/datatables/dataTables.fixedHeader.min.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/datatables/dataTables.keyTable.min.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/datatables/dataTables.responsive.min.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/datatables/responsive.bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/datatables/dataTables.scroller.min.js') }}"></script>

    <script src="{{ url_for('static', filename='pages/datatables.init.js') }}"></script>

    <script type="text/javascript">
        function getInfo() {
            var probs = {{ home_predicted_probs|safe }};
            var home_team = {{ home_features.name|tojson }};
            var away_team = {{ away_features.name|tojson }};

            var info = { probs: probs, home_team: home_team, away_team: away_team};
            return info;

        }
    </script>

    <script src="{{ url_for('static', filename='plugins/flot-chart/jquery.flot.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/flot-chart/jquery.flot.time.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/flot-chart/jquery.flot.tooltip.min.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/flot-chart/jquery.flot.resize.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/flot-chart/jquery.flot.pie.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/flot-chart/jquery.flot.selection.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/flot-chart/jquery.flot.stack.js') }}"></script>
    <script src="{{ url_for('static', filename='plugins/flot-chart/jquery.flot.crosshair.js') }}"></script>

    <script src="{{ url_for('static', filename='pages/team/jquery.flot.init.js') }}"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#datatable').dataTable();
            TableManageButtons.init();

        });
    </script>
{% endblock %}